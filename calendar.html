```<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>æ™ºèƒ½è‹±è¯­æ‰“å¡ç³»ç»Ÿ</title>
        <style>
            :root {
                --primary-color: #6c5ce7;
                --success-color: #00b894;
                --reward-color: #fdcb6e;
                --system-reward-color: #ff7675;
                --bg-color: #f0f2f5;
                --text-color: #2d3436;
            }

            body {
                font-family: "Segoe UI", "PingFang SC", sans-serif;
                background-color: var(--bg-color);
                margin: 0;
                padding: 10px;
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .nav-container {
                text-align: center;
                margin-bottom: 10px;
            }

            .nav-link {
                color: var(--primary-color);
                text-decoration: none;
                font-weight: bold;
                font-size: 14px;
            }

            .tool-bar {
                display: flex;
                justify-content: center;
                gap: 5px;
                margin-bottom: 15px;
            }

            .tool-input {
                padding: 6px;
                border: 1px solid #ddd;
                border-radius: 6px;
                width: 100px;
                font-size: 12px;
            }

            .container {
                max-width: 900px;
                width: 100%;
                background: white;
                padding: 15px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                box-sizing: border-box;
            }

            header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }

            .month-title {
                font-size: 18px;
                font-weight: bold;
                color: var(--primary-color);
            }

            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }

            .weekday {
                text-align: center;
                font-weight: bold;
                color: #636e72;
                padding: 5px 0;
                font-size: 14px;
            }

            .day {
                min-height: 100px;
                border: 1px solid #dfe6e9;
                border-radius: 8px;
                padding: 6px;
                display: flex;
                flex-direction: column;
                position: relative;
                cursor: pointer;
                transition: all 0.2s;
                overflow: hidden;
                background: #fff;
                align-items: center;
                box-sizing: border-box;
            }

            .day:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            }

            .day.today {
                border: 2px solid var(--primary-color);
                background: #f8faff;
            }

            .day.other-month {
                opacity: 0.3;
                cursor: default;
                pointer-events: none;
            }

            .day.checked-in {
                background-color: #e6fffb;
            }

            .day.checked-in::before {
                content: "âœ“";
                position: absolute;
                top: 2px;
                right: 5px;
                color: var(--success-color);
                font-weight: bold;
                font-size: 14px;
                z-index: 2;
            }

            .day-header {
                display: flex;
                justify-content: space-between;
                width: 100%;
                margin-bottom: 4px;
            }

            .day-num {
                font-size: 10px;
                font-weight: bold;
                color: #2d3436;
            }

            .lunar-num {
                font-weight: normal;
                color: #a4b0be;
                font-size: 9px;
            }

            .daily-img {
                width: 45px;
                height: 45px;
                object-fit: cover;
                border-radius: 6px;
                margin-bottom: 3px;
                border: 1px solid #eee;
            }

            .word-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                width: 100%;
            }

            .daily-word {
                font-size: 11px;
                color: var(--primary-color);
                font-weight: 700;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            .daily-translation {
                font-size: 9px;
                color: #636e72;
                margin-top: 1px;
            }

            .pronounce-btn {
                background: none;
                border: none;
                cursor: pointer;
                font-size: 10px;
                padding: 1px;
                color: var(--primary-color);
                opacity: 0.7;
            }

            .reward-icon,
            .sys-reward-icon {
                position: absolute;
                bottom: 2px;
                right: 2px;
                font-size: 14px;
                cursor: pointer;
                z-index: 3;
            }

            .sys-reward-icon {
                right: 18px;
            }

            .sys-reward-tag {
                position: absolute;
                top: 0;
                left: 0;
                background: var(--system-reward-color);
                color: white;
                font-size: 8px;
                padding: 1px 3px;
                border-bottom-right-radius: 5px;
                z-index: 2;
            }

            .btn {
                padding: 6px 10px;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-weight: bold;
                font-size: 12px;
            }

            .btn-confirm {
                background: var(--primary-color);
                color: white;
            }

            .btn-cancel {
                background: #eee;
            }

            .info-card {
                margin-top: 20px;
                font-size: 12px;
                color: #636e72;
                background: #fdf9f9;
                padding: 12px;
                border-radius: 10px;
            }

            @media (max-width: 600px) {
                .day {
                    min-height: 85px;
                }
                .daily-img {
                    width: 35px;
                    height: 35px;
                }
                .month-title {
                    font-size: 16px;
                }
            }

            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                backdrop-filter: blur(3px);
                justify-content: center;
                align-items: center;
                z-index: 1000;
            }

            .modal-content {
                background: white;
                padding: 25px;
                border-radius: 15px;
                width: 280px;
                box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
                text-align: center;
            }

            .modal-content input {
                width: 100%;
                padding: 10px;
                margin: 10px 0;
                border: 1px solid #ddd;
                border-radius: 8px;
                box-sizing: border-box;
            }

            .btn-group {
                display: flex;
                gap: 10px;
                margin-top: 15px;
            }
        </style>
    </head>
    <body>
        <div class="nav-container">
            <a href="index.html" class="nav-link">ğŸ‰ åˆ‡æ¢åˆ°æŠ½å¥–ç³»ç»Ÿ</a>
        </div>

        <div class="tool-bar">
            <input
                type="text"
                id="global-word-input"
                class="tool-input"
                placeholder="è¾“å…¥å•è¯"
            />
            <button
                class="btn btn-confirm"
                onclick="
                    speak(document.getElementById('global-word-input').value)
                "
            >
                ğŸ”Š æœ—è¯»
            </button>
        </div>

        <div class="container">
            <header>
                <div style="display: flex; gap: 5px">
                    <button class="btn" onclick="changeMonth(-1)">ä¸Šæœˆ</button>
                    <button
                        class="btn"
                        style="background: #a29bfe; color: white"
                        onclick="promptPassword('sys_config')"
                    >
                        è®¾ç½®
                    </button>
                </div>
                <div class="month-title" id="month-display"></div>
                <button class="btn" onclick="changeMonth(1)">ä¸‹æœˆ</button>
            </header>

            <div class="calendar-grid" id="calendar-grid">
                <div class="weekday">æ—¥</div>
                <div class="weekday">ä¸€</div>
                <div class="weekday">äºŒ</div>
                <div class="weekday">ä¸‰</div>
                <div class="weekday">å››</div>
                <div class="weekday">äº”</div>
                <div class="weekday">å…­</div>
            </div>

            <div class="info-card">
                <p style="margin: 0 0 5px 0">ğŸš€ <b>ç­¾åˆ°æŒ‡å—ï¼š</b></p>
                <ul style="margin: 0; padding-left: 18px">
                    <li>å•å‡»æ—¥æœŸï¼šæœªç­¾åˆ°åˆ™ç¡®è®¤ç­¾åˆ°ï¼Œå·²ç­¾åˆ°/æœªæ¥åˆ™æœ—è¯»ã€‚</li>
                    <li>
                        åŒå‡»å›¾ç‰‡ï¼šç®¡ç†å‘˜ä¿®æ”¹è¯¥æ—¥å¥–ã€‚åŒå‡»ç©ºç™½ï¼šç®¡ç†å‘˜é‡ç½®ç­¾åˆ°ã€‚
                    </li>
                    <li>åšæŒæ‰“å¡å¯å¾—å‘¨æœŸå¥–ã€‚å›¾ç‰‡æ¯å¤©ä¸åŒï¼Œå•è¯ä¸é‡å¤ã€‚</li>
                </ul>
            </div>
        </div>

        <!-- Modals -->
        <div id="pw-modal" class="modal">
            <div class="modal-content">
                <h3 id="pw-title">èº«ä»½éªŒè¯</h3>
                <input
                    type="password"
                    id="pw-input"
                    placeholder="è¾“å…¥ç®¡ç†å¯†ç "
                />
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('pw-modal')"
                    >
                        å–æ¶ˆ</button
                    ><button
                        class="btn btn-confirm"
                        onclick="confirmPasswordAction()"
                    >
                        ç¡®å®š
                    </button>
                </div>
            </div>
        </div>
        <div id="reward-modal" class="modal">
            <div class="modal-content">
                <h3>è®¾å®šå¥–åŠ±å†…å®¹</h3>
                <input type="text" id="reward-input" placeholder="å¥–å“åç§°" />
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('reward-modal')"
                    >
                        å–æ¶ˆ</button
                    ><button class="btn btn-confirm" onclick="commitReward()">
                        ä¿å­˜
                    </button>
                </div>
            </div>
        </div>
        <div id="checkin-modal" class="modal">
            <div class="modal-content">
                <h3>ç¡®è®¤ç­¾åˆ°</h3>
                <p id="checkin-msg" style="font-size: 14px"></p>
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('checkin-modal')"
                    >
                        å–æ¶ˆ</button
                    ><button class="btn btn-confirm" onclick="commitCheckIn()">
                        ç¡®å®š
                    </button>
                </div>
            </div>
        </div>
        <div id="sys-reward-config-modal" class="modal">
            <div class="modal-content">
                <h3>å‘¨æœŸå¥–åŠ±è®¾å®š</h3>
                <input
                    type="number"
                    id="sys-interval-input"
                    placeholder="å‘¨æœŸå¤©æ•°"
                /><input
                    type="text"
                    id="sys-content-input"
                    placeholder="å¥–åŠ±å†…å®¹"
                />
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('sys-reward-config-modal')"
                    >
                        å–æ¶ˆ</button
                    ><button
                        class="btn btn-confirm"
                        onclick="commitSysRewardConfig()"
                    >
                        ä¿å­˜
                    </button>
                </div>
            </div>
        </div>
        <div id="show-reward-modal" class="modal">
            <div class="modal-content">
                <h3>ğŸ‰ æ­å–œä¸­å¥–</h3>
                <div
                    id="reward-text"
                    style="
                        font-size: 18px;
                        color: #ff7675;
                        margin: 15px 0;
                        font-weight: bold;
                    "
                ></div>
                <button
                    class="btn btn-confirm"
                    style="width: 100%"
                    onclick="closeModal('show-reward-modal')"
                >
                    æ”¶ä¸‹äº†
                </button>
            </div>
        </div>

        <script>
            const wordList = [
                { en: "Dream", cn: "æ¢¦æƒ³" },
                { en: "Brave", cn: "å‹‡æ•¢" },
                { en: "Focus", cn: "ä¸“æ³¨" },
                { en: "Great", cn: "ä¼Ÿå¤§" },
                { en: "Happy", cn: "å¿«ä¹" },
                { en: "Kind", cn: "å–„è‰¯" },
                { en: "Light", cn: "å…‰æ˜" },
                { en: "Noble", cn: "é«˜å°š" },
                { en: "Ocean", cn: "æµ·æ´‹" },
                { en: "Quiet", cn: "å®‰é™" },
                { en: "River", cn: "æ²³æµ" },
                { en: "Smile", cn: "å¾®ç¬‘" },
                { en: "Trust", cn: "ä¿¡ä»»" },
                { en: "Unity", cn: "å›¢ç»“" },
                { en: "Value", cn: "ä»·å€¼" },
                { en: "Young", cn: "å¹´è½»" },
                { en: "Zest", cn: "çƒ­æƒ…" },
                { en: "Active", cn: "æ´»è·ƒ" },
                { en: "Bright", cn: "æ˜äº®" },
                { en: "Daily", cn: "æ—¥å¸¸" },
                { en: "Energy", cn: "èƒ½é‡" },
                { en: "Peace", cn: "å’Œå¹³" },
                { en: "Glory", cn: "è£è€€" },
                { en: "Spirit", cn: "ç²¾ç¥" },
                { en: "Magic", cn: "é­”æ³•" },
                { en: "Wisdom", cn: "æ™ºæ…§" },
                { en: "Faith", cn: "ä¿¡å¿µ" },
                { en: "Music", cn: "éŸ³ä¹" },
                { en: "Grace", cn: "ä¼˜é›…" },
                { en: "Wonder", cn: "å¥‡è¿¹" },
                { en: "Breeze", cn: "å¾®é£" },
                { en: "Clarity", cn: "æ¸…æ™°" },
                { en: "Dawn", cn: "é»æ˜" },
                { en: "Essence", cn: "æœ¬è´¨" },
                { en: "Fancy", cn: "æƒ³è±¡" },
                { en: "Gentle", cn: "æ¸©æŸ”" },
                { en: "Harmony", cn: "å’Œè°" },
                { en: "Infinite", cn: "æ— é™" },
                { en: "Journey", cn: "æ—…ç¨‹" },
                { en: "Keep", cn: "ä¿æŒ" },
                { en: "Legend", cn: "ä¼ å¥‡" },
                { en: "Motive", cn: "åŠ¨åŠ›" },
                { en: "Nature", cn: "è‡ªç„¶" },
                { en: "Origin", cn: "èµ·æº" },
                { en: "Pure", cn: "çº¯å‡€" },
                { en: "Quest", cn: "è¿½æ±‚" },
                { en: "Rare", cn: "ç¨€æœ‰" },
                { en: "Sacred", cn: "ç¥åœ£" },
                { en: "Theory", cn: "ç†è®º" },
                { en: "Unique", cn: "ç‹¬ç‰¹" },
                { en: "Vital", cn: "å…³é”®" },
                { en: "Wealth", cn: "è´¢å¯Œ" },
                { en: "X-ray", cn: "å°„çº¿" },
                { en: "Yield", cn: "äº§å‡º" },
                { en: "Zenith", cn: "é¡¶ç‚¹" },
            ];

            let viewDate = new Date();
            let checkins = JSON.parse(
                localStorage.getItem("cal_checkins") || "[]",
            );
            let rewards = JSON.parse(
                localStorage.getItem("cal_rewards") || "{}",
            );
            let adminPassword = localStorage.getItem("cal_pw") || "";
            let sysRewardConfig = JSON.parse(
                localStorage.getItem("cal_sys_reward") ||
                    '{"interval": 7, "content": "å‘¨æœŸæ€§æˆå°±å¥–"}',
            );
            let wordAssignments = JSON.parse(
                localStorage.getItem("cal_word_assignments") || "{}",
            );

            let pendingDate = "";
            let passwordActionType = "";

            function getWordForDate(dateStr) {
                if (wordAssignments[dateStr]) return wordAssignments[dateStr];
                const used = Object.values(wordAssignments).map((w) => w.en);
                const available = wordList.filter((w) => !used.includes(w.en));
                let selected =
                    available.length > 0
                        ? available[
                              Math.floor(Math.random() * available.length)
                          ]
                        : wordList[0];
                wordAssignments[dateStr] = selected;
                localStorage.setItem(
                    "cal_word_assignments",
                    JSON.stringify(wordAssignments),
                );
                return selected;
            }

            function getLunarDate(dateStr) {
                try {
                    const date = new Date(dateStr);
                    const formatter = new Intl.DateTimeFormat(
                        "zh-CN-u-ca-chinese",
                        { day: "numeric" },
                    );
                    return formatter.format(date) + "æ—¥";
                } catch (e) {
                    return "";
                }
            }

            function render() {
                const grid = document.getElementById("calendar-grid");
                const headers = Array.from(grid.querySelectorAll(".weekday"));
                grid.innerHTML = "";
                headers.forEach((h) => grid.appendChild(h));

                const y = viewDate.getFullYear(),
                    m = viewDate.getMonth();
                document.getElementById("month-display").innerText =
                    `${y}å¹´ ${m + 1}æœˆ`;

                const firstDay = new Date(y, m, 1).getDay();
                const lastDate = new Date(y, m + 1, 0).getDate();
                const prevLastDate = new Date(y, m, 0).getDate();

                const sysRewardDates = [];
                let validCount = 0;
                [...checkins].sort().forEach((d) => {
                    if (!rewards[d]) {
                        validCount++;
                        if (validCount % sysRewardConfig.interval === 0)
                            sysRewardDates.push(d);
                    }
                });

                for (let i = firstDay; i > 0; i--)
                    grid.appendChild(createDayEl(prevLastDate - i + 1, true));
                for (let d = 1; d <= lastDate; d++) {
                    const ds = `${y}-${String(m + 1).padStart(2, "0")}-${String(d).padStart(2, "0")}`;
                    grid.appendChild(
                        createDayEl(d, false, ds, sysRewardDates.includes(ds)),
                    );
                }
            }

            function createDayEl(num, isOther, ds, isSys) {
                const div = document.createElement("div");
                div.className = "day" + (isOther ? " other-month" : "");
                if (isOther) {
                    div.innerHTML = `<span class="day-num">${num}</span>`;
                    return div;
                }

                const today = new Date();
                today.setHours(0, 0, 0, 0);
                if (new Date(ds).getTime() === today.getTime())
                    div.classList.add("today");
                if (checkins.includes(ds)) div.classList.add("checked-in");

                const word = getWordForDate(ds);
                const lunar = getLunarDate(ds);
                div.innerHTML = `<div class="day-header"><span class="day-num">${num}</span><span class="lunar-num">${lunar}</span></div>`;

                const img = document.createElement("img");
                img.className = "daily-img";
                img.src = `https://picsum.photos/seed/${ds.replace(/-/g, "")}/80/80`;
                img.ondblclick = (e) => {
                    e.stopPropagation();
                    promptPassword("reward", ds);
                };
                div.appendChild(img);

                const wc = document.createElement("div");
                wc.className = "word-container";
                wc.innerHTML = `<div class="daily-word">${word.en}</div><div class="daily-translation">${word.cn}</div><button class="pronounce-btn" onclick="event.stopPropagation(); speak('${word.en}')">ğŸ”Š</button>`;
                div.appendChild(wc);

                if (rewards[ds]) {
                    const icon = document.createElement("div");
                    icon.className = "reward-icon";
                    icon.innerText = "ğŸ";
                    icon.onclick = (e) => {
                        e.stopPropagation();
                        showRewardInfo(ds, false);
                    };
                    div.appendChild(icon);
                }
                if (isSys) {
                    div.insertAdjacentHTML(
                        "afterbegin",
                        '<div class="sys-reward-tag">ç³»ç»Ÿå¥–</div>',
                    );
                    const icon = document.createElement("div");
                    icon.className = "sys-reward-icon";
                    icon.innerText = "ğŸ†";
                    icon.onclick = (e) => {
                        e.stopPropagation();
                        showRewardInfo(ds, true);
                    };
                    div.appendChild(icon);
                }

                let timer = null;
                div.onclick = () => {
                    if (timer) {
                        clearTimeout(timer);
                        timer = null;
                        promptPassword("reset", ds);
                    } else {
                        timer = setTimeout(() => {
                            timer = null;
                            handleCheckInClick(ds, word.en);
                        }, 250);
                    }
                };
                return div;
            }

            function speak(text) {
                if (!text) return;
                if ("speechSynthesis" in window) {
                    window.speechSynthesis.cancel();
                    const u = new SpeechSynthesisUtterance(text);
                    u.lang = "en-US";
                    u.rate = 0.9;
                    window.speechSynthesis.speak(u);
                }
            }

            function handleCheckInClick(ds, en) {
                if (checkins.includes(ds) || new Date(ds) > new Date()) {
                    speak(en);
                    if (checkins.includes(ds)) return;
                }
                if (new Date(ds) > new Date()) return;
                pendingDate = ds;
                const remain =
                    sysRewardConfig.interval -
                    (checkins.length % sysRewardConfig.interval);
                document.getElementById("checkin-msg").innerText =
                    `ç¡®è®¤ç­¾åˆ°å—ï¼Ÿè·ç¦»ä¸‹ä¸ªç³»ç»Ÿå¥–è¿˜éœ€ ${remain} å¤©ã€‚`;
                openModal("checkin-modal");
            }

            function commitCheckIn() {
                checkins.push(pendingDate);
                checkins.sort();
                localStorage.setItem("cal_checkins", JSON.stringify(checkins));
                closeModal("checkin-modal");
                render();
            }

            function promptPassword(type, ds) {
                pendingDate = ds;
                passwordActionType = type;
                document.getElementById("pw-title").innerText = adminPassword
                    ? "èº«ä»½éªŒè¯"
                    : "è®¾ç½®ç®¡ç†å¯†ç ";
                openModal("pw-modal");
            }

            function confirmPasswordAction() {
                const val = document.getElementById("pw-input").value;
                if (!adminPassword) {
                    if (val.length < 4) return alert("å¤ªçŸ­");
                    adminPassword = val;
                    localStorage.setItem("cal_pw", val);
                } else if (val !== adminPassword) return alert("é”™è¯¯");
                closeModal("pw-modal");
                document.getElementById("pw-input").value = "";
                if (passwordActionType === "reward") {
                    document.getElementById("reward-input").value =
                        rewards[pendingDate] || "";
                    openModal("reward-modal");
                } else if (passwordActionType === "sys_config") {
                    document.getElementById("sys-interval-input").value =
                        sysRewardConfig.interval;
                    document.getElementById("sys-content-input").value =
                        sysRewardConfig.content;
                    openModal("sys-reward-config-modal");
                } else if (passwordActionType === "reset") {
                    checkins = checkins.filter((d) => d !== pendingDate);
                    localStorage.setItem(
                        "cal_checkins",
                        JSON.stringify(checkins),
                    );
                    render();
                }
            }

            function commitReward() {
                const val = document
                    .getElementById("reward-input")
                    .value.trim();
                if (val) rewards[pendingDate] = val;
                else delete rewards[pendingDate];
                localStorage.setItem("cal_rewards", JSON.stringify(rewards));
                closeModal("reward-modal");
                render();
            }

            function commitSysRewardConfig() {
                const i = parseInt(
                    document.getElementById("sys-interval-input").value,
                );
                const c = document
                    .getElementById("sys-content-input")
                    .value.trim();
                if (isNaN(i) || i < 1) return alert("æ— æ•ˆ");
                sysRewardConfig = { interval: i, content: c };
                localStorage.setItem(
                    "cal_sys_reward",
                    JSON.stringify(sysRewardConfig),
                );
                closeModal("sys-reward-config-modal");
                render();
            }

            function showRewardInfo(ds, isSys) {
                if (!checkins.includes(ds)) return alert("è¯·å…ˆç­¾åˆ°");
                const text = isSys ? sysRewardConfig.content : rewards[ds];
                document.getElementById("reward-text").innerText = text;
                const oldBtn =
                    document.getElementById("reward-text").nextElementSibling;
                if (oldBtn && oldBtn.tagName === "BUTTON") oldBtn.remove();
                if (adminPassword) {
                    const b = document.createElement("button");
                    b.className = "btn btn-confirm";
                    b.style.width = "100%";
                    b.style.marginTop = "5px";
                    b.innerText = isSys ? "ä¿®æ”¹ç³»ç»Ÿå¥–" : "ä¿®æ”¹æ‰‹åŠ¨å¥–";
                    b.onclick = () => {
                        closeModal("show-reward-modal");
                        promptPassword(isSys ? "sys_config" : "reward", ds);
                    };
                    document.getElementById("reward-text").after(b);
                }
                openModal("show-reward-modal");
            }

            function changeMonth(s) {
                viewDate.setMonth(viewDate.getMonth() + s);
                render();
            }
            function openModal(id) {
                document.getElementById(id).style.display = "flex";
            }
            function closeModal(id) {
                document.getElementById(id).style.display = "none";
            }

            render();
        </script>
    </body>
</html>
```
