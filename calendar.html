<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>æ™ºèƒ½è‹±è¯­æ‰“å¡ç³»ç»Ÿ</title>
        <style>
            :root {
                --primary-color: #6c5ce7;
                --success-color: #00b894;
                --reward-color: #fdcb6e;
                --system-reward-color: #ff7675;
                --bg-color: #f0f2f5;
                --text-color: #2d3436;
            }

            body {
                font-family: "Segoe UI", "PingFang SC", sans-serif;
                background-color: var(--bg-color);
                margin: 0;
                padding: 10px;
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .container {
                max-width: 900px;
                width: 100%;
                background: white;
                padding: 15px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                box-sizing: border-box;
            }

            header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }

            .month-title {
                font-size: 24px;
                font-weight: bold;
                color: var(--primary-color);
            }

            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }

            .weekday {
                text-align: center;
                font-weight: bold;
                color: #636e72;
                padding: 10px 0;
            }

            .day {
                min-height: 100px;
                border: 1px solid #dfe6e9;
                border-radius: 8px;
                padding: 4px;
                display: flex;
                flex-direction: column;
                position: relative;
                cursor: pointer;
                transition: all 0.2s;
                overflow: hidden;
                background: #fff;
                align-items: center;
            }

            .day:hover {
                transform: translateY(-3px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            }

            .day.today {
                border: 2px solid var(--primary-color);
                background: #f8faff;
            }

            .day.other-month {
                opacity: 0.3;
                cursor: default;
                pointer-events: none;
            }

            .day.checked-in {
                background-color: #e6fffb;
            }

            .day.checked-in::before {
                content: "âœ“";
                position: absolute;
                top: 2px;
                right: 5px;
                color: var(--success-color);
                font-weight: bold;
                font-size: 18px;
                z-index: 2;
            }

            .day-num {
                font-size: 12px;
                font-weight: bold;
                color: #b2bec3;
                align-self: flex-start;
                margin-bottom: 4px;
            }

            .daily-img {
                width: 45px;
                height: 45px;
                object-fit: cover;
                border-radius: 6px;
                margin-bottom: 3px;
                pointer-events: auto;
                border: 1px solid #eee;
            }

            .word-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                width: 100%;
            }

            .daily-word {
                font-size: 13px;
                color: var(--primary-color);
                font-weight: 700;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            .daily-translation {
                font-size: 11px;
                color: #636e72;
                margin-top: 2px;
            }

            .pronounce-btn {
                background: none;
                border: none;
                cursor: pointer;
                font-size: 12px;
                padding: 2px;
                color: var(--primary-color);
                margin-top: 2px;
                opacity: 0.7;
            }

            .pronounce-btn:hover {
                opacity: 1;
                transform: scale(1.1);
            }

            .reward-icon,
            .sys-reward-icon {
                position: absolute;
                bottom: 2px;
                right: 2px;
                font-size: 14px;
                cursor: pointer;
                z-index: 3;
            }

            .sys-reward-icon {
                right: 18px; /* åç§»é¿å…é‡å  */
            }

            .sys-reward-tag {
                position: absolute;
                top: 0;
                left: 0;
                background: var(--system-reward-color);
                color: white;
                font-size: 9px;
                padding: 1px 4px;
                border-bottom-right-radius: 5px;
                z-index: 2;
            }

            /* Mobile Adjustments */
            @media (max-width: 600px) {
                body {
                    padding: 5px;
                }
                .container {
                    padding: 10px;
                }
                .calendar-grid {
                    gap: 3px;
                }
                .day {
                    min-height: 80px;
                    padding: 2px;
                }
                .daily-img {
                    width: 35px;
                    height: 35px;
                }
                .daily-word {
                    font-size: 9px;
                }
                .daily-translation {
                    font-size: 8px;
                    transform: scale(0.9);
                }
                .pronounce-btn {
                    font-size: 10px;
                    margin-top: 0;
                }
                .day-num {
                    font-size: 9px;
                }
                .month-title {
                    font-size: 16px;
                }
                .btn {
                    padding: 5px 8px;
                    font-size: 11px;
                }
                .sys-reward-tag {
                    font-size: 6px;
                    padding: 0 2px;
                }
                .reward-icon,
                .sys-reward-icon {
                    font-size: 12px;
                }
            }

            /* Modals */
            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                backdrop-filter: blur(3px);
                justify-content: center;
                align-items: center;
                z-index: 1000;
            }

            .modal-content {
                background: white;
                padding: 30px;
                border-radius: 15px;
                width: 320px;
                box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
            }

            .modal-content h3 {
                margin-top: 0;
                color: var(--primary-color);
            }
            .modal-content input {
                width: 100%;
                padding: 12px;
                margin: 10px 0;
                border: 1px solid #ddd;
                border-radius: 8px;
                box-sizing: border-box;
            }

            .btn-group {
                display: flex;
                gap: 10px;
                margin-top: 15px;
            }
            .btn {
                flex: 1;
                padding: 10px;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-weight: bold;
            }
            .btn-confirm {
                background: var(--primary-color);
                color: white;
            }
            .btn-cancel {
                background: #eee;
            }

            .info-card {
                margin-top: 20px;
                font-size: 13px;
                color: #636e72;
                background: #fdf9f9;
                padding: 15px;
                border-radius: 10px;
            }
        </style>
    </head>
    <body>
        <div style="text-align: center; margin-bottom: 10px">
            <a
                href="index.html"
                style="
                    color: var(--primary-color);
                    text-decoration: none;
                    font-weight: bold;
                "
                >ğŸ‰ åˆ‡æ¢åˆ°æŠ½å¥–ç³»ç»Ÿ</a
            >
        </div>
        <div
            style="
                display: flex;
                justify-content: center;
                gap: 5px;
                margin-bottom: 15px;
            "
        >
            <input
                type="text"
                id="global-word-input"
                placeholder="è¾“å…¥å•è¯"
                style="
                    padding: 6px;
                    border: 1px solid #ddd;
                    border-radius: 6px;
                    width: 100px;
                    font-size: 12px;
                "
            />
            <button
                class="btn"
                style="width: auto; padding: 6px 12px"
                onclick="
                    speak(document.getElementById('global-word-input').value)
                "
            >
                ğŸ”Š æœ—è¯»
            </button>
        </div>
        <div class="container">
            <header>
                <div style="display: flex; gap: 10px">
                    <button class="btn" onclick="changeMonth(-1)">
                        ä¸Šä¸ªæœˆ
                    </button>
                    <button
                        class="btn"
                        style="background: #a29bfe"
                        onclick="promptPassword('sys_config')"
                    >
                        è®¾ç½®å‘¨æœŸå¥–
                    </button>
                </div>
                <div class="month-title" id="month-display">2023å¹´ 10æœˆ</div>
                <button class="btn" onclick="changeMonth(1)">ä¸‹ä¸ªæœˆ</button>
            </header>

            <div class="calendar-grid" id="calendar-grid">
                <div class="weekday">æ—¥</div>
                <div class="weekday">ä¸€</div>
                <div class="weekday">äºŒ</div>
                <div class="weekday">ä¸‰</div>
                <div class="weekday">å››</div>
                <div class="weekday">äº”</div>
                <div class="weekday">å…­</div>
            </div>

            <div class="info-card">
                <p>ğŸš€ <b>ç­¾åˆ°è§„åˆ™ï¼š</b></p>
                <ul>
                    <li>
                        å•å‡»æ—¥æœŸï¼šè¿›è¡Œæ‰“å¡ã€‚ä¸€æ—¦ç¡®è®¤æ‰“å¡ï¼Œæ™®é€šç”¨æˆ·æ— æ³•æ’¤é”€ã€‚
                    </li>
                    <li>åŒå‡»å›¾ç‰‡ï¼šè®¾å®š/ä¿®æ”¹è¯¥æ—¥å¥–åŠ±ï¼ˆéœ€ç®¡ç†å‘˜å¯†ç ï¼‰ã€‚</li>
                    <li>åŒå‡»éå›¾ç‰‡åŒºåŸŸï¼šé‡ç½®æ‰“å¡çŠ¶æ€ï¼ˆéœ€ç®¡ç†å‘˜å¯†ç ï¼‰ã€‚</li>
                    <li>
                        è¿ç»­æ‰“å¡æ»¡å‘¨æœŸå°†è·å¾—å‘¨æœŸå¥–ã€‚å¦‚ä¸­æ–­ï¼Œå¥–åŠ±ä¼šè‡ªåŠ¨å»¶åã€‚
                    </li>
                    <li>ç‚¹å‡» ğŸ”Š å›¾æ ‡å¯ä»¥æ”¶å¬å•è¯å‘éŸ³ã€‚</li>
                </ul>
            </div>
        </div>

        <!-- å¯†ç å¼¹çª— -->
        <div id="pw-modal" class="modal">
            <div class="modal-content">
                <h3 id="pw-title">èº«ä»½éªŒè¯</h3>
                <input
                    type="password"
                    id="pw-input"
                    placeholder="è¾“å…¥ç®¡ç†å¯†ç "
                />
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('pw-modal')"
                    >
                        å–æ¶ˆ
                    </button>
                    <button
                        class="btn btn-confirm"
                        onclick="confirmPasswordAction()"
                    >
                        ç¡®å®š
                    </button>
                </div>
            </div>
        </div>

        <!-- å¥–åŠ±è®¾å®šå¼¹çª— -->
        <div id="reward-modal" class="modal">
            <div class="modal-content">
                <h3>è®¾å®šå¥–åŠ±å†…å®¹</h3>
                <input
                    type="text"
                    id="reward-input"
                    placeholder="ä¾‹å¦‚ï¼šè±ªåå¤§ç¤¼åŒ…"
                />
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('reward-modal')"
                    >
                        å–æ¶ˆ
                    </button>
                    <button class="btn btn-confirm" onclick="commitReward()">
                        ä¿å­˜
                    </button>
                </div>
            </div>
        </div>

        <!-- ç¡®è®¤ç­¾åˆ°å¼¹çª— -->
        <div id="checkin-modal" class="modal">
            <div class="modal-content">
                <h3>ç­¾åˆ°ç¡®è®¤</h3>
                <p id="checkin-msg"></p>
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('checkin-modal')"
                    >
                        å†æƒ³æƒ³
                    </button>
                    <button class="btn btn-confirm" onclick="commitCheckIn()">
                        ç¡®å®šç­¾åˆ°
                    </button>
                </div>
            </div>
        </div>

        <!-- ç³»ç»Ÿå¥–åŠ±å‘¨æœŸè®¾å®šå¼¹çª— -->
        <div id="sys-reward-config-modal" class="modal">
            <div class="modal-content">
                <h3>å‘¨æœŸå¥–åŠ±è®¾å®š</h3>
                <div
                    style="
                        text-align: left;
                        font-size: 14px;
                        margin-bottom: 5px;
                    "
                >
                    æ‰“å¡å‘¨æœŸ (å¤©)
                </div>
                <input
                    type="number"
                    id="sys-interval-input"
                    placeholder="ä¾‹å¦‚ï¼š7"
                />
                <div
                    style="
                        text-align: left;
                        font-size: 14px;
                        margin-bottom: 5px;
                    "
                >
                    å¥–åŠ±å†…å®¹
                </div>
                <input
                    type="text"
                    id="sys-content-input"
                    placeholder="ä¾‹å¦‚ï¼šé¢å¤–è·å¾—10ç§¯åˆ†"
                />
                <div class="btn-group">
                    <button
                        class="btn btn-cancel"
                        onclick="closeModal('sys-reward-config-modal')"
                    >
                        å–æ¶ˆ
                    </button>
                    <button
                        class="btn btn-confirm"
                        onclick="commitSysRewardConfig()"
                    >
                        ä¿å­˜è®¾ç½®
                    </button>
                </div>
            </div>
        </div>

        <!-- å¥–åŠ±å±•ç¤ºå¼¹çª— -->
        <div id="show-reward-modal" class="modal">
            <div class="modal-content" style="text-align: center">
                <h3>ğŸ‰ æ­å–œä¸­å¥–</h3>
                <div
                    id="reward-text"
                    style="
                        font-size: 20px;
                        color: #ff7675;
                        margin: 20px 0;
                        font-weight: bold;
                    "
                ></div>
                <button
                    class="btn btn-confirm"
                    onclick="closeModal('show-reward-modal')"
                >
                    æ”¶ä¸‹äº†
                </button>
            </div>
        </div>

        <script>
            const wordList = [
                { en: "Dream", cn: "æ¢¦æƒ³" },
                { en: "Brave", cn: "å‹‡æ•¢" },
                { en: "Focus", cn: "ä¸“æ³¨" },
                { en: "Great", cn: "ä¼Ÿå¤§" },
                { en: "Happy", cn: "å¿«ä¹" },
                { en: "Kind", cn: "å–„è‰¯" },
                { en: "Light", cn: "å…‰æ˜" },
                { en: "Noble", cn: "é«˜å°š" },
                { en: "Ocean", cn: "æµ·æ´‹" },
                { en: "Quiet", cn: "å®‰é™" },
                { en: "River", cn: "æ²³æµ" },
                { en: "Smile", cn: "å¾®ç¬‘" },
                { en: "Trust", cn: "ä¿¡ä»»" },
                { en: "Unity", cn: "å›¢ç»“" },
                { en: "Value", cn: "ä»·å€¼" },
                { en: "Young", cn: "å¹´è½»" },
                { en: "Zest", cn: "çƒ­æƒ…" },
                { en: "Active", cn: "æ´»è·ƒ" },
                { en: "Bright", cn: "æ˜äº®" },
                { en: "Daily", cn: "æ—¥å¸¸" },
                { en: "Energy", cn: "èƒ½é‡" },
                { en: "Peace", cn: "å’Œå¹³" },
                { en: "Glory", cn: "è£è€€" },
                { en: "Spirit", cn: "ç²¾ç¥" },
                { en: "Magic", cn: "é­”æ³•" },
                { en: "Wisdom", cn: "æ™ºæ…§" },
                { en: "Faith", cn: "ä¿¡å¿µ" },
                { en: "Music", cn: "éŸ³ä¹" },
                { en: "Grace", cn: "ä¼˜é›…" },
                { en: "Wonder", cn: "å¥‡è¿¹" },
            ];

            let sysRewardConfig = JSON.parse(
                localStorage.getItem("cal_sys_reward") ||
                    '{"interval": 7, "content": "å‘¨æœŸæ€§æˆå°±å¥–"}',
            );
            let viewDate = new Date();
            let checkins = JSON.parse(
                localStorage.getItem("cal_checkins") || "[]",
            );
            let rewards = JSON.parse(
                localStorage.getItem("cal_rewards") || "{}",
            );
            let adminPassword = localStorage.getItem("cal_pw") || "";
            let pendingDate = "";
            let passwordActionType = "";

            function render() {
                const grid = document.getElementById("calendar-grid");
                const headers = Array.from(grid.querySelectorAll(".weekday"));
                grid.innerHTML = "";
                headers.forEach((h) => grid.appendChild(h));

                const y = viewDate.getFullYear();
                const m = viewDate.getMonth();
                document.getElementById("month-display").innerText =
                    `${y}å¹´ ${m + 1}æœˆ`;

                const firstDay = new Date(y, m, 1).getDay();
                const lastDate = new Date(y, m + 1, 0).getDate();
                const prevLastDate = new Date(y, m, 0).getDate();

                const sysRewardDates = [];
                let validCount = 0;
                const sortedCheckins = [...checkins].sort();
                for (let cDate of sortedCheckins) {
                    if (!rewards[cDate]) {
                        validCount++;
                        if (validCount % sysRewardConfig.interval === 0)
                            sysRewardDates.push(cDate);
                    }
                }

                for (let i = firstDay; i > 0; i--)
                    grid.appendChild(createDay(prevLastDate - i + 1, true));
                for (let d = 1; d <= lastDate; d++) {
                    const dateStr = `${y}-${String(m + 1).padStart(2, "0")}-${String(d).padStart(2, "0")}`;
                    grid.appendChild(
                        createDay(
                            d,
                            false,
                            dateStr,
                            sysRewardDates.includes(dateStr),
                        ),
                    );
                }
            }

            function createDay(num, isOther, dateStr, isSystemReward) {
                const div = document.createElement("div");
                div.className = "day" + (isOther ? " other-month" : "");
                if (isOther) {
                    div.innerHTML = `<span class="day-num">${num}</span>`;
                    return div;
                }

                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const isToday = new Date(dateStr).getTime() === today.getTime();
                if (isToday) div.classList.add("today");
                if (checkins.includes(dateStr)) div.classList.add("checked-in");

                const seed = dateStr.replace(/-/g, "");
                const wordObj = wordList[parseInt(seed) % wordList.length];

                div.innerHTML = `<span class="day-num">${num}</span>`;

                const img = document.createElement("img");
                img.className = "daily-img";
                img.src = `https://picsum.photos/seed/${seed}/120/120`; // ç¨å¾®å¤§ä¸€ç‚¹ä¿è¯æ¸…æ™°
                img.ondblclick = (e) => {
                    e.stopPropagation();
                    promptPassword("reward", dateStr);
                };
                div.appendChild(img);

                const wordContainer = document.createElement("div");
                wordContainer.className = "word-container";

                const wordEl = document.createElement("div");
                wordEl.className = "daily-word";
                wordEl.innerText = wordObj.en;
                wordContainer.appendChild(wordEl);

                const transEl = document.createElement("div");
                transEl.className = "daily-translation";
                transEl.innerText = wordObj.cn;
                wordContainer.appendChild(transEl);

                const pronounceBtn = document.createElement("button");
                pronounceBtn.className = "pronounce-btn";
                pronounceBtn.innerHTML = "ğŸ”Š";
                pronounceBtn.onclick = (e) => {
                    e.stopPropagation();
                    speak(wordObj.en);
                };
                wordContainer.appendChild(pronounceBtn);

                div.appendChild(wordContainer);

                if (rewards[dateStr]) {
                    const icon = document.createElement("div");
                    icon.className = "reward-icon";
                    icon.innerText = "ğŸ";
                    icon.onclick = (e) => {
                        e.stopPropagation();
                        showRewardInfo(dateStr, false);
                    };
                    div.appendChild(icon);
                }

                if (isSystemReward) {
                    const tag = document.createElement("div");
                    tag.className = "sys-reward-tag";
                    tag.innerText = "ç³»ç»Ÿå¥–";
                    div.appendChild(tag);
                    const sysIcon = document.createElement("div");
                    sysIcon.className = "sys-reward-icon";
                    sysIcon.innerText = "ğŸ†";
                    sysIcon.onclick = (e) => {
                        e.stopPropagation();
                        showRewardInfo(dateStr, true);
                    };
                    div.appendChild(sysIcon);
                }

                let clickTimer = null;
                div.onclick = (e) => {
                    if (clickTimer) {
                        clearTimeout(clickTimer);
                        clickTimer = null;
                        promptPassword("reset", dateStr);
                    } else {
                        clickTimer = setTimeout(() => {
                            clickTimer = null;
                            startCheckInFlow(dateStr, wordObj.en);
                        }, 250);
                    }
                };

                return div;
            }

            function speak(text) {
                if ("speechSynthesis" in window) {
                    // å…ˆå–æ¶ˆæ‰€æœ‰æ­£åœ¨æ’é˜Ÿçš„è¯­éŸ³ï¼Œé˜²æ­¢å µå¡
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = "en-US";
                    utterance.rate = 0.9;
                    window.speechSynthesis.speak(utterance);
                } else {
                    alert("æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³æ’­æ”¾ã€‚");
                }
            }

            function startCheckInFlow(dateStr, wordEn) {
                if (checkins.includes(dateStr)) {
                    speak(wordEn);
                    return;
                }
                const target = new Date(dateStr);
                const now = new Date();
                now.setHours(0, 0, 0, 0);

                if (target > now) {
                    speak(wordEn);
                    return;
                }
                pendingDate = dateStr;
                const nextRewardCount =
                    sysRewardConfig.interval -
                    (checkins.length % sysRewardConfig.interval);
                document.getElementById("checkin-msg").innerText =
                    `æ­å–œä½ å®Œæˆæ‰“å¡å‡†å¤‡ï¼\n\nè·ç¦»è·å–ä¸‹ä¸ªç³»ç»Ÿå¥–åŠ±è¿˜éœ€ ${nextRewardCount} å¤©ã€‚`;
                openModal("checkin-modal");
            }

            function commitCheckIn() {
                checkins.push(pendingDate);
                checkins.sort();
                localStorage.setItem("cal_checkins", JSON.stringify(checkins));
                closeModal("checkin-modal");
                render();
            }

            function promptPassword(type, dateStr) {
                pendingDate = dateStr;
                passwordActionType = type;
                document.getElementById("pw-title").innerText = adminPassword
                    ? "ç®¡ç†å‘˜èº«ä»½éªŒè¯"
                    : "é¦–æ¬¡è®¾ç½®ç®¡ç†å‘˜å¯†ç ";
                openModal("pw-modal");
            }

            function confirmPasswordAction() {
                const input = document.getElementById("pw-input").value;
                if (!adminPassword) {
                    if (input.length < 4) return alert("å¯†ç è‡³å°‘4ä½");
                    adminPassword = input;
                    localStorage.setItem("cal_pw", adminPassword);
                } else if (input !== adminPassword) {
                    return alert("å¯†ç é”™è¯¯ï¼");
                }
                closeModal("pw-modal");
                document.getElementById("pw-input").value = "";
                if (passwordActionType === "reward") {
                    document.getElementById("reward-input").value =
                        rewards[pendingDate] || "";
                    openModal("reward-modal");
                } else if (passwordActionType === "sys_config") {
                    document.getElementById("sys-interval-input").value =
                        sysRewardConfig.interval;
                    document.getElementById("sys-content-input").value =
                        sysRewardConfig.content;
                    openModal("sys-reward-config-modal");
                } else if (passwordActionType === "reset") {
                    checkins = checkins.filter((d) => d !== pendingDate);
                    localStorage.setItem(
                        "cal_checkins",
                        JSON.stringify(checkins),
                    );
                    render();
                }
            }

            function commitSysRewardConfig() {
                const interval = parseInt(
                    document.getElementById("sys-interval-input").value,
                );
                const content = document
                    .getElementById("sys-content-input")
                    .value.trim();
                if (isNaN(interval) || interval < 1)
                    return alert("å‘¨æœŸå¿…é¡»æ˜¯å¤§äº0çš„æ•°å­—");
                sysRewardConfig = { interval, content };
                localStorage.setItem(
                    "cal_sys_reward",
                    JSON.stringify(sysRewardConfig),
                );
                closeModal("sys-reward-config-modal");
                render();
            }

            function commitReward() {
                const val = document
                    .getElementById("reward-input")
                    .value.trim();
                if (val) rewards[pendingDate] = val;
                else delete rewards[pendingDate];
                localStorage.setItem("cal_rewards", JSON.stringify(rewards));
                closeModal("reward-modal");
                render();
            }

            function showRewardInfo(dateStr, isSys) {
                if (!checkins.includes(dateStr))
                    return alert("è¯·å…ˆæ‰“å¡è§£é”å¥–åŠ±ï¼");
                const text = isSys ? sysRewardConfig.content : rewards[dateStr];
                document.getElementById("reward-text").innerText = text;
                if (adminPassword) {
                    const modifyBtn = document.createElement("button");
                    modifyBtn.className = "btn";
                    modifyBtn.style.marginTop = "10px";
                    modifyBtn.style.fontSize = "12px";
                    modifyBtn.innerText = isSys
                        ? "ä¿®æ”¹ç³»ç»Ÿå¥–å†…å®¹"
                        : "ä¿®æ”¹æ­¤æ‰‹åŠ¨å¥–åŠ±";
                    modifyBtn.onclick = () => {
                        closeModal("show-reward-modal");
                        promptPassword(
                            isSys ? "sys_config" : "reward",
                            dateStr,
                        );
                    };
                    const oldBtn =
                        document.getElementById(
                            "reward-text",
                        ).nextElementSibling;
                    if (oldBtn && oldBtn.tagName === "BUTTON") oldBtn.remove();
                    document.getElementById("reward-text").after(modifyBtn);
                }
                openModal("show-reward-modal");
            }

            function changeMonth(step) {
                viewDate.setMonth(viewDate.getMonth() + step);
                render();
            }
            function openModal(id) {
                document.getElementById(id).style.display = "flex";
            }
            function closeModal(id) {
                document.getElementById(id).style.display = "none";
            }

            render();
        </script>
    </body>
</html>
